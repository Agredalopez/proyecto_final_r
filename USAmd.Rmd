---
title: "*Trabajo Aplicado*"
date: "`r Sys.Date()`" 
autor: "Dennier Agreda López"
output:
  rmdformats::readthedown:
    highlight: tango
    self_contained: true
    code_folding: show
    thumbnails: true
    gallery: true
    fig_width: 12
    fig_height: 5
    lightbox : true 
    se_bookdown : true
    df_print: kable
---

```{r library, message = FALSE, echo=FALSE}
library(jsonlite)
library(knitr)
library(dplyr)
library(ggplot2)
library(rbokeh)
library(leaflet)
library(RColorBrewer)
library(raster)
library(kableExtra)
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Tutoriales 

# REGEX

<div style="text-align: justify">Una expresión regular, regex o regexp (a veces llamada expresión racional) es una secuencia de caracteres que definen un patrón de búsqueda. Por lo general, dichos patrones son utilizados por los algoritmos de búsqueda de cadenas para las operaciones "buscar" o "buscar y reemplazar" en las cadenas, o para la validación de entrada. Es una técnica desarrollada en informática teórica y teoría del lenguaje formal.

El concepto surgió en la década de 1950 cuando el matemático estadounidense Stephen Cole Kleene formalizó la descripción de un lenguaje regular. El concepto entró en uso común con las utilidades de procesamiento de texto de Unix. Existen diferentes sintaxis para escribir expresiones regulares desde la década de 1980, una es el estándar POSIX y otra, ampliamente utilizada, la sintaxis de Perl.[^1]<div/>

# MARKDOWN
<div style="text-align: justify">Markdown es un lenguaje de marcado ligero con sintaxis de formato de texto sin formato. Su diseño le permite convertirse a muchos formatos de salida, pero la herramienta original con el mismo nombre solo admite HTML. Markdown se usa a menudo para formatear archivos Léame, para escribir mensajes en foros de discusión en línea y para crear texto enriquecido utilizando un editor de texto sin formato.

Dado que la descripción inicial de Markdown contenía ambigüedades y preguntas sin respuesta, las implementaciones que aparecieron a lo largo de los años tienen diferencias sutiles y muchas vienen con extensiones de sintaxis.[^2]<div/>

# Sobre Estados Unidos

<div style="text-align: justify">Para el desarrollo del presente trabajo se hará uso de información socio-demográfica de Estados Unidos tomados de la API [DATA Usa](https://datausa.io/) y otras fuentes anexas, como los archivos precargados de `state dataset` que almacena información de los 50 estados de Estados Unidos (EE.UU), como también la de información de coordenadas poligonales de `GADM, de raster`. Finalmente se anexa información de las estaciones de la ciudad de los Ángeles, California, obtenida de la API [CityBik](http://api.citybik.es/).<div/>

## EE.UU en el Mundo

```{r map, echo=FALSE, warning=FALSE, message=FALSE}
url<-"https://datausa.io/api/data?drilldowns=State&measures=Population"
usa <- readLines(url)
tab_popusa <- jsonlite::fromJSON(usa)[[1]]
tab_popusa<-tab_popusa[,c(1:3,5)]

tmp_names<-c("state_id","state","year_id","pop")
colnames(tab_popusa)<-tmp_names

states.usa<-cbind.data.frame(state.division,state.region,state.name,state.abb,state.area)
tmp_names<-c("region","division","state","abb","area_miles")
colnames(states.usa)<-tmp_names
mile_km_sq<-2.58999
states.usa<-states.usa %>% mutate(area_kms=area_miles*mile_km_sq)

tab_usa_total<-merge(tab_popusa,states.usa)
tab_usa_total<-tab_usa_total %>% mutate(density=pop/area_kms)
tab_usa_total_div<-tab_usa_total %>%
  group_by(year_id,division) %>%
  summarize(pop_mean=mean(pop),pop_median=median(pop),pop_agg=sum(pop),area_agg=sum(area_kms))%>%
  mutate(densi_agg=pop_agg/area_agg,percent=pop_agg/sum(pop_agg)) %>% 
  ungroup() %>% 
  arrange(year_id,desc(densi_agg))
usa <- getData("GADM", country="USA", level=1) 
polygon_popup <- paste0("<strong>Name: </strong>", usa$NAME_1, "<br>")
usa$randomData <- rnorm(n=nrow(usa), 150, 30)
pal <- colorQuantile("Greens", NULL, n = 5)

map = leaflet() %>% 
  addProviderTiles("CartoDB.Positron") %>% 
  setView(-98.35, 39.7,
          zoom = 2) %>% 
  addPolygons(data = usa, 
              fillColor= ~pal(randomData),
              fillOpacity = 0.4, 
              weight = 2, 
              color = "green",
              popup = polygon_popup)%>% 
addControl("Estados Unidos",position = "topleft",className = "map-title") %>% 
addMarkers(lng = -98.35, lat=39.7)

map

```

```{r tabla_div,echo=FALSE, fig.align="center"}
knitr::kable(tab_usa_total_div) %>%
  kable_styling() %>%
  scroll_box(width = "500px", height = "200px")
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

[^1]: Ruslan Mitkov (2003). The Oxford Handbook of Computational Linguistics. Oxford University Press. p. 754.
[^2]: "Markdown". 2013-12-04. Archived from the original on 2004-04-02